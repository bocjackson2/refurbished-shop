<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Refurbished Tech Store</title>
<style>
  :root{
    --bg:#0b0d10;
    --card:#12151a;
    --muted:#7a8699;
    --text:#e7ecf3;
    --accent:#3da9fc;
    --accent-2:#2cb67d;
    --danger:#ef476f;
  }
  body {
    margin:0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,
      Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
    background: var(--bg);
    color: var(--text);
  }
  header {
    padding: 1rem;
    background: var(--card);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  a.brand {
    color: var(--accent);
    font-weight: bold;
    font-size: 1.5rem;
    text-decoration: none;
  }
  main {
    max-width: 960px;
    margin: 1rem auto;
    padding: 0 1rem;
  }
  .products {
    display: grid;
    grid-template-columns: repeat(auto-fill,minmax(260px,1fr));
    gap: 1rem;
  }
  .product-card {
    background: var(--card);
    border-radius: 8px;
    padding: 1rem;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
  }
  .product-card img {
    width: 100%;
    border-radius: 8px;
    margin-bottom: 0.5rem;
    cursor: pointer;
  }
  .product-card strong, .product-card a.product-link {
    color: var(--accent);
    text-decoration: none;
    cursor: pointer;
    font-size: 1.1rem;
  }
  .product-card p {
    margin: 0.25rem 0;
    color: var(--muted);
    flex-grow: 1;
  }
  .price {
    margin-top: auto;
    font-weight: bold;
    color: var(--accent-2);
  }
  /* Modal styles */
  #productModal {
    display:none;
    position:fixed;
    top:0;left:0;width:100%;height:100%;
    background:rgba(0,0,0,0.85);
    color:#fff;
    z-index:1000;
    overflow:auto;
  }
  #productModal > div {
    background: var(--card);
    max-width: 600px;
    margin: 5% auto;
    padding: 20px;
    border-radius: 12px;
    position: relative;
  }
  #productModal img {
    width: 100%;
    border-radius: 12px;
    margin-bottom: 16px;
  }
  #closeModal {
    position: absolute;
    top: 12px;
    right: 16px;
    font-size: 28px;
    background: none;
    border: none;
    color: #fff;
    cursor: pointer;
  }
  #modalBuyLink {
    color: var(--accent);
    font-weight: bold;
    text-decoration: none;
  }
  /* Responsive */
  @media(max-width: 640px){
    .products {
      grid-template-columns: 1fr;
    }
  }
</style>
</head>
<body>
<header>
  <a href="#" class="brand">Refurbished Tech Store</a>
  <nav>
    <a href="mailto:youremail@example.com" style="color: var(--text); margin-right:1rem;">Email</a>
    <a href="https://wa.me/6581234567" target="_blank" style="color: var(--text);">WhatsApp</a>
  </nav>
</header>

<main>
  <h1>Products</h1>
  <div class="products" id="productList">
    <!-- Products will be rendered here -->
  </div>
</main>

<!-- Modal -->
<div id="productModal" aria-hidden="true">
  <div>
    <button id="closeModal" aria-label="Close modal">×</button>
    <img id="modalImg" src="" alt="" />
    <h2 id="modalTitle"></h2>
    <p><strong>Brand:</strong> <span id="modalBrand"></span></p>
    <p><strong>Category:</strong> <span id="modalCategory"></span></p>
    <p><strong>Condition:</strong> <span id="modalCondition"></span></p>
    <p><strong>Specs:</strong> <span id="modalSpecs"></span></p>
    <p><strong>Price:</strong> $<span id="modalPrice"></span></p>
    <p><a id="modalBuyLink" href="#" target="_blank" rel="noopener" style="display:inline-block;">Buy Now</a></p>
  </div>
</div>

<script>
  // Your product data
  const PRODUCTS = [
    {
      id: 'hp-omen-17',
      title: 'HP OMEN 17 RTX 4080',
      brand: 'HP',
      category: 'Laptop',
      condition: 'Grade A',
      specs: 'Intel i7 • 32GB RAM • RTX 4080 • 1TB SSD • 17" QHD',
      price: 2299,
      was: 2599,
      img: 'https://picsum.photos/seed/hpomen/600/400',
      checkoutLink: ''
    },
    // You can add more products here...
  ];

  // Render products on the page
  const productList = document.getElementById('productList');
  productList.innerHTML = PRODUCTS.map(p => `
    <div class="product-card">
      <img src="${p.img}" alt="${p.title}" />
      <a href="?product=${p.id}" class="product-link"><strong>${p.title}</strong></a>
      <p>${p.specs}</p>
      <p class="price">$${p.price.toFixed(0)}</p>
    </div>
  `).join('');

  // Modal elements
  const modal = document.getElementById('productModal');
  const closeModalBtn = document.getElementById('closeModal');
  const modalImg = document.getElementById('modalImg');
  const modalTitle = document.getElementById('modalTitle');
  const modalBrand = document.getElementById('modalBrand');
  const modalCategory = document.getElementById('modalCategory');
  const modalCondition = document.getElementById('modalCondition');
  const modalSpecs = document.getElementById('modalSpecs');
  const modalPrice = document.getElementById('modalPrice');
  const modalBuyLink = document.getElementById('modalBuyLink');

  function showProductDetails(id) {
    const p = PRODUCTS.find(pr => pr.id === id);
    if(!p) return closeModal();

    modalImg.src = p.img;
    modalImg.alt = p.title;
    modalTitle.textContent = p.title;
    modalBrand.textContent = p.brand;
    modalCategory.textContent = p.category;
    modalCondition.textContent = p.condition;
    modalSpecs.textContent = p.specs;
    modalPrice.textContent = p.price.toFixed(0);
    if(p.checkoutLink) {
      modalBuyLink.href = p.checkoutLink;
      modalBuyLink.style.display = 'inline-block';
    } else {
      modalBuyLink.style.display = 'none';
    }

    modal.style.display = 'block';
    modal.setAttribute('aria-hidden', 'false');
    document.body.style.overflow = 'hidden'; // prevent scroll behind modal
  }

  function closeModal() {
    modal.style.display = 'none';
    modal.setAttribute('aria-hidden', 'true');
    document.body.style.overflow = '';
    history.pushState("", document.title, window.location.pathname + window.location.hash);
  }

  // Event delegation for product links
  document.body.addEventListener('click', e => {
    const link = e.target.closest('.product-link');
    if(link) {
      e.preventDefault();
      const url = new URL(link.href);
      const productId = url.searchParams.get('product');
      if(productId) {
        showProductDetails(productId);
        history.pushState({productId}, "", `?product=${productId}`);
      }
    }
  });

  closeModalBtn.onclick = closeModal;

  // Close modal on Escape key
  document.addEventListener('keydown', e => {
    if(e.key === 'Escape' && modal.style.display === 'block') {
      closeModal();
    }
  });

  // Handle browser back/forward buttons
  window.addEventListener('popstate', () => {
    const params = new URLSearchParams(window.location.search);
    const productId = params.get('product');
    if(productId) showProductDetails(productId);
    else closeModal();
  });

  // Open modal if ?product= in URL on page load
  window.addEventListener('load', () => {
    const params = new URLSearchParams(window.location.search);
    const productId = params.get('product');
    if(productId) showProductDetails(productId);
  });
</script>
</body>
</html>
